##
# AWS elasticbeanstalk example to change timezone to New York timezone.
#
# This example changes the system time (clock and localtime)
# and also changes the HTTPD webserver configuration.
#
#
# ## Outome ##
#
# The system clock time zone is set to New York,
# and the hardware clock continues to use UTC:
#
#     $ cat /etc/sysconfig/clock
#     ZONE="America\/New_York"
#     UTC=true
#
# The localtime is set to New York:
#
#     $ zdump /etc/localtime
#     /etc/localtime  Sun Jan  1 00:00:00 2018 America/New_York
##

container_commands:
  00_change_timezone_of_clock:
    command: sudo sed -i 's/^ZONE=".*"/ZONE="America\/New_York"' /etc/sysconfig/clock
  01_change_timezone_of_httpd:
    command: sed -i '/DATE_TIMEZONE/ s/UTC/America\/New_York/' /etc/httpd/conf.d/aws_env.conf
commands:
  00_change_timezone_of_localtime:
    command: sudo ln -sf /usr/share/zoneinfo/America/New_York /etc/localtime
  01_restart_http:
    command: sudo service httpd restart
